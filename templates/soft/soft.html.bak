<!DOCTYPE html>

<html lang="en">
<head>
    <title>Websocket Client</title>
    <script type="text/javascript" src="{{ url('static', filename='win10/js/jquery-2.2.4.min.js') }}"></script>
    </script>  
    <script type="application/javascript">
        var ws;
        var ipserver = "127.0.0.1";
        function init() {
            var servermsg = document.getElementById("servermsg");
            var ipservermsg = document.getElementById("ipservermsg");
            ipservermsg.innerHTML = ipservermsg.innerHTML + ipserver;
            ws = new WebSocket("ws://"+ipserver+":8080/ws/soft");
            ws.onopen = function(){
                servermsg.innerHTML = servermsg.innerHTML + "<br>Server connected";
            };
            ws.onmessage = function(e){
                servermsg.innerHTML = servermsg.innerHTML + "<br><< Received data: " + e.data;
            };
            ws.onclose = function(){
                servermsg.innerHTML = servermsg.innerHTML + "<br>Server disconnected";
            };
        }
        function postmsg(){
            var text = document.getElementById("message").value;
            ws.send(text);
            servermsg.innerHTML = servermsg.innerHTML + "<br>>> Data sent: " + text;
        }
    </script>
</head>
<body onload="init();">
    <div id="ipservermsg"><h1>2IP server:</h1></div>
    <div id="Send"><h1>Send:</h1></div>
    <form action="" onSubmit="postmsg();return false;">
        <input type="text" name="message" value="" id="message">
        <input type="submit" name="submit" value="Go!" id="submit">
    </form>
    <div id="servermsg"><h1>Message log XXXXXXX:</h1></div>
</body>

</html>